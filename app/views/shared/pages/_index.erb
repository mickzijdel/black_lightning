<% show_new_button = true if show_new_button.nil? %>
<% include_edit_button = true if include_edit_button.nil? %>
<% search_fields = nil if search_fields.nil? %>

<% headers << '' if can?(:edit, resource_class) && include_edit_button %>

<% field_sets.each_with_index do |fields, i| %>
  <% # Add an edit link to the end if the current user can edit the current instance.  %>
  <% # Assumes the first item is the instance.%>
  <% fields << get_link(fields[0], :edit) if can?(:edit, fields[0]) && include_edit_button %>

    <% fields[0] = get_link(fields[0], :show) %>
<% end %>

<h1><%= @title %></h1>
<p>
  <%= display_block("#{resource_class.to_s.titleize} Description", false) %>
</p>

<% if search_fields.present? %>
  <%= render 'shared/search_form', input_fields: search_fields %>
<% end %>

<%= will_paginate(resources) %>

<%= render 'shared/table', headers: headers, field_sets: field_sets %>

<% if show_new_button %>
  <%= get_link resource_class, :new %>
<% end %>

<%= will_paginate(resources) %>
