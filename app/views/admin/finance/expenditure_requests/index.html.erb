<% headers = [ :name, :amount, :budget, :request_status, :proof_status] %>

<% field_sets = @expenditure_requests.map { |expenditure_request| [
  expenditure_request,  
  humanized_money_with_symbol(expenditure_request.amount),
  get_link(expenditure_request.budget_line&.budget, :show, link_text: expenditure_request.budget_line&.budget&.title),
  expenditure_request.request_status.titleize,
  expenditure_request.proof_status.titleize,
] }%>

<% search_fields = {
    name_cont:                                  { slug: 'defaults.name' },
    amount_cents_eq:                            { slug: 'defaults.amount_cents' },
    submitter_notes_cont:                       { slug: 'defaults.submitter_notes' },
    business_manager_notes_cont:                { slug: 'defaults.business_manager_notes' },
    user_full_name_cont:                        { slug: 'defaults.user' },
    bank_information_account_holder_name_cont:  { slug: 'defaults.bank_information' },

    budget_id_eq:             { type: :association, slug: 'defaults.budget', collection: Finance::Budget.accessible_by(current_ability) },
    request_status_eq:        { type: :select,      slug: 'defaults.request_status', choices: enum_options_for_select(Finance::ExpenditureRequest, 'request_status') },
    proof_status_eq:          { type: :select,      slug: 'defaults.proof_status', choices: enum_options_for_select(Finance::ExpenditureRequest, 'proof_status') },

    show_waiting_for_update:  { type: :boolean, label: 'Show Waiting For Update' },
    show_all:                 { type: :boolean, label: 'Show All' },
} %>

<%= render 'shared/pages/index', resource_class: Finance::ExpenditureRequest, resources: @expenditure_requests, headers: headers, field_sets: field_sets, search_fields: search_fields, show_new_button: false %>
